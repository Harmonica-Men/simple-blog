{% extends 'base.html' %}
{% load static %}
{% block title %} {{ post.title }} {% endblock %}

{% block content %}
    <h1>{{ post.title }}</h1>
    <!-- <h4>Current user ID: {{ user.id }}</h4> -->
    <small>
        Author ID: {{ post.author.id }}<br>
        By: {{ post.author }} - {{ post.author.first_name }} {{ post.author.last_name }}<br>
        Date: {{ post.post_date }}
        
        {% if user.is_authenticated and user.id == post.author.id %}
            <a href="{% url 'update-post' post.pk %}">EDIT</a> *
            <a href="{% url 'delete-post' post.pk %}">DELETE POST</a>
        {% endif %}
    </small>
    <br>
    <hr>
    <br>
    {{ post.body|safe }}
    <br>    
    <hr>
    <br>
    <form action="{% url 'like_post' post.pk %}" method="POST">
        {% csrf_token %}
        {% if user.is_authenticated %}

            {% if liked %}
                <button type="submit" name="post_id" value="{{ post.id }}" class="btn btn-danger btn-sm">Unlike</button>
            {% else %}
                <button type="submit" name="post_id" value="{{ post.id }}" class="btn btn-primary btn-sm">Like</button>    
            {% endif %}
        {% else %}
            <small>must be logged in to like</small>
        {% endif%}

        {{ total_likes }} Likes


    </form>

    <br>
    <hr>

    <h2>Comments .... </h2>
    <a href="{% url 'add_comment' post.pk %}">Add Comment</a>

    {% if not post.comments.exists %}
    No Comments yet 
    <!-- <a href="{% url 'add_comment' post.pk %}">Add Comment</a> -->
  
    {% else %}
    {% for comment in post.comments.all %}
        <strong>{{ comment.name }} - {{ comment.date_added }}</strong>
        <br>
        {{ comment.body }}
    {% endfor %}
    {% endif %}

  
<br>
<br>
<hr>


<div class="card mb-3">
    <div class="row g-0">
      <div class="col-md-2">

{% if post.author.profile.profile_pic.url %}

        <img src="{{ post.author.profile.profile_pic.url }}"  width="100" height="100" class="rounded-circle" alt="Profile Picture">
{% else %}
        <img src="{% static 'blogger/images/Anonymous-Profile-pic.jpg'%}"  width="100" height="100" class="rounded-circle" alt="Profile Picture">

{% endif %}
      </div>
      <div class="col-md-10">
        <div class="card-body">
          <h5 class="card-title">{{ post.author.first_name }} {{ post.author.last_name }}</h5>
          {% url 'show_profile_page' post.author.profile.id as profile_url %}
            <a href="{{ profile_url }}">"Profile Page !!!!"</a>

          <p class ="small text-muted">

            
            {% if post.author.profile.website_url %} 
              <a href="post.author.profile.website_url">Website</a> | 
            {% endif %} 

            {% if post.author.profile.website_url %} 
              <a href="post.author.profile.website_url"></a> Facebook | 
            {% endif %} 

            {% if post.author.profile.website_url %} 
              <a href="post.author.profile.website_url"></a> Instagram | 
            {% endif %} 

            {% if post.author.profile.website_url %} 
              <a href="post.author.profile.website_url"></a> Twitter | 
            {% endif %} 

            {% if post.author.profile.website_url %} 
              <a href="post.author.profile.website_url"></a> Instagram | 
            {% endif %} 

            {% if post.author.profile.website_url %} 
              <a href="post.author.profile.website_url"></a> Pinterest  | 
            {% endif %} 

            
          <p class="card-text">{{ post.author.profile.bio }}</p>
          <!-- <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p> -->
        </div>
      </div>
    </div>
  </div>






<hr>
{% endblock %}